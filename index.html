<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Dantzig â€” Demo interattiva</title>
  <link rel="icon" href="icon-192.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f0f12">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Dantzig â€” Due problemi â€œimpossibiliâ€</h1>
    <p class="muted">Demo HTML/JS/CSS (PWA) in unâ€™unica cartella. Problema (1): potenza del test t vs Ïƒ. Problema (2): Lemma di Neymanâ€“Pearson.</p>
  </header>

  <main>
    <section class="card grid">
      <div>
        <h2>Problema (1) â€” Potenza del test t vs Ïƒ</h2>
        <p>Fissa <span class="mono">Î” = Î¼â‚ âˆ’ Î¼â‚€</span> e osserva come la potenza dipende da <span class="mono">Ïƒ</span>. Preâ€‘calcoliamo una curva stabile; lâ€™animazione muove un marker lungo la linea (senza vibrazioni).</p>
        <div class="row">
          <div><label>n</label><input id="n1" type="number" value="20" min="5" max="100"></div>
          <div><label>Î±</label><input id="alpha1" type="number" value="0.05" step="0.01" min="0.001" max="0.2"></div>
          <div><label>Î” = Î¼â‚ âˆ’ Î¼â‚€</label><input id="delta1" type="number" value="1.0" step="0.1"></div>
          <div><label>Ïƒ min/max</label><input id="smin" type="number" value="0.5" step="0.1"><input id="smax" type="number" value="3.0" step="0.1"></div>
          <div><label>Trial Monte Carlo</label><input id="trials1" type="number" value="30000" step="5000" min="5000"></div>
          <button id="run1">Simula & Disegna</button>
          <button id="anim1">Animazione</button>
          <button id="rec1">Registra WebM</button>
        </div>
      </div>
      <div>
        <canvas id="chart1" width="900" height="360" aria-label="Potenza vs sigma"></canvas>
        <p><small class="code" id="res1"></small></p>
      </div>
    </section>

    <section class="card grid">
      <div>
        <h2>Problema (2) â€” Lemma di Neymanâ€“Pearson</h2>
        <p>Curve di potenza teoriche per <span class="mono">Xáµ¢ ~ ğ’©(Î¼, ÏƒÂ²)</span> con Ïƒ noto: <strong>LRT</strong> (una coda) vs <strong>bilaterale</strong> (due code). Lâ€™animazione muove due marker lungo le curve.</p>
        <div class="row">
          <div><label>n</label><input id="n2" type="number" value="10" min="5" max="300"></div>
          <div><label>Î±</label><input id="alpha2" type="number" value="0.05" step="0.01" min="0.001" max="0.2"></div>
          <div><label>Î¼â‚€</label><input id="mu0" type="number" value="0.0" step="0.1"></div>
          <div><label>Î¼â‚</label><input id="mu1" type="number" value="0.5" step="0.1"></div>
          <div><label>Ïƒ (noto)</label><input id="sigma2" type="number" value="1.0" step="0.1"></div>
          <button id="run2">Disegna</button>
          <button id="anim2">Animazione</button>
          <button id="rec2">Registra WebM</button>
        </div>
      </div>
      <div>
        <canvas id="chart2" width="900" height="360" aria-label="Curve di potenza teoriche"></canvas>
        <p><small class="code" id="res2"></small></p>
      </div>
    </section>

    <section class="card">
      <h3>Note</h3>
      <ul>
        <li>Questa Ã¨ unâ€™illustrazione computazionale, non una dimostrazione formale.</li>
        <li>Su iOS Safari la registrazione <span class="mono">MediaRecorder</span> potrebbe non essere disponibile.</li>
      </ul>
    </section>
  </main>

  <footer>&copy; 2025 â€¢ Demo educativa â€¢ MIT License</footer>

  <script src="script.js"></script>
  <script>
    // Registra il service worker e forza l'aggiornamento
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          const reg = await navigator.serviceWorker.register('./service-worker.js');
          if (reg.waiting) { reg.waiting.postMessage({type:'SKIP_WAITING'}); }
        } catch(e){ console.warn('SW', e); }
      });
    }
  </script>
</body>
</html>
